<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../css/wolai.css"/><title>栈和队列 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="栈和队列" class="main-title"></div></div></header><article><div id="dsrghjT2jByXAqSc322A8s" class="wolai-block wolai-text"><div><span class="inline-wrap">栈和队列是常见的数据结构，分别具有先进后出（LIFO）和先进先出（FIFO）的特性。我们先讲解这两种数据结构的基本概念和操作，然后通过示例题目来加深理解。</span></div></div><h3 id="8oycqAzKhErQNHJCBMkbKV" class="wolai-block"><span class="inline-wrap">栈（Stack）</span></h3><h4 id="cZjfCizs42NXkhA16YJX9V" class="wolai-block"><span class="inline-wrap">基本操作</span></h4><ol class="wolai-block"><li id="9iavEF66kRtRMxwUspiHBa"><div class="marker"></div><span class="inline-wrap"><b>push</b></span><span class="inline-wrap">：在栈顶添加元素。</span></li><li id="3NTBM1FdeircgVAMCcLvhF"><div class="marker"></div><span class="inline-wrap"><b>pop</b></span><span class="inline-wrap">：移除并返回栈顶元素。</span></li><li id="j3nRRX2PvFTuN3xrhEmPAe"><div class="marker"></div><span class="inline-wrap"><b>peek</b></span><span class="inline-wrap">：返回栈顶元素但不移除它。</span></li><li id="8fokheKa34RgzA9gTPZ7Cw"><div class="marker"></div><span class="inline-wrap"><b>is_empty</b></span><span class="inline-wrap">：判断栈是否为空。</span></li></ol><div id="vSp3t7EKShDRSXMtQRBnUs" class="wolai-block wolai-text"><div><span class="inline-wrap">Python 的 </span><span class="inline-wrap"><code>list</code></span><span class="inline-wrap"> 可以直接用作栈，使用 </span><span class="inline-wrap"><code>append</code></span><span class="inline-wrap"> 方法作为 </span><span class="inline-wrap"><code>push</code></span><span class="inline-wrap">，使用 </span><span class="inline-wrap"><code>pop</code></span><span class="inline-wrap"> 方法作为 </span><span class="inline-wrap"><code>pop</code></span><span class="inline-wrap">。</span></div></div><h4 id="2B59c9dg9gqru9Y3uPcSoD" class="wolai-block"><span class="inline-wrap">示例题目 1：有效的括号 (Valid Parentheses)</span></h4><ul class="wolai-block"><li id="vfWLKj3ZL9HDCxBqcWzRQU"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">题目： 给定一个只包括 </span><span class="inline-wrap"><code>&#39;(&#39;</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>&#39;)&#39;</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>&#39;{&#39;</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>&#39;}&#39;</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>&#39;[&#39;</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>&#39;]&#39;</code></span><span class="inline-wrap"> 的字符串，判断字符串是否有效。有效字符串需满足：</span><ol class="wolai-block"><li id="t6E7xfPCNRNP7yZXrYcPkL"><div class="marker"></div><span class="inline-wrap">左括号必须用相同类型的右括号闭合。</span></li><li id="cQPxqyPKSc4JqsHLG4EMqJ"><div class="marker"></div><span class="inline-wrap">左括号必须以正确的顺序闭合。</span></li></ol><div id="peFHeH8dLiTQqSpRJ2QYrd" class="wolai-block wolai-text"><div><span class="inline-wrap">示例：</span></div></div><code-block id="ugY68Pogie1b47TaUdVPiK" class="wolai-block"><div class="wolai-pre"><div data-lang="TypeScript" class="marker"></div><pre>输入<span class="token operator">:</span> <span class="token string">"({[]})"</span>
输出<span class="token operator">:</span> True</pre></div></code-block></li><li id="wnQo88RXHrqUfWid86S8LZ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">解答：</span><code-block id="wDGVuo2oUkKd9veS1XGKZy" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">def</span> <span class="token function">is_valid</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    mapping <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">")"</span><span class="token punctuation">:</span> <span class="token string">"("</span><span class="token punctuation">,</span> <span class="token string">"}"</span><span class="token punctuation">:</span> <span class="token string">"{"</span><span class="token punctuation">,</span> <span class="token string">"]"</span><span class="token punctuation">:</span> <span class="token string">"["</span><span class="token punctuation">}</span>
    
    <span class="token keyword">for</span> char <span class="token keyword">in</span> s<span class="token punctuation">:</span>
        <span class="token keyword">if</span> char <span class="token keyword">in</span> mapping<span class="token punctuation">:</span>
            top_element <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">if</span> stack <span class="token keyword">else</span> <span class="token string">'#'</span>
            <span class="token keyword">if</span> mapping<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">!=</span> top_element<span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span>char<span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> <span class="token keyword">not</span> stack

<span class="token comment"># 测试样例</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>is_valid<span class="token punctuation">(</span><span class="token string">"({[]})"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>is_valid<span class="token punctuation">(</span><span class="token string">"([)]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 输出: False</span></pre></div></code-block></li></ul><h3 id="7XKFzDZcvEmedbCjsq6w5C" class="wolai-block"><span class="inline-wrap">队列（Queue）</span></h3><h4 id="djdkmqWef2qxAcEUwUDaog" class="wolai-block"><span class="inline-wrap">基本操作</span></h4><ol class="wolai-block"><li id="mPF72KJBqD5uDohfEYdPHv"><div class="marker"></div><span class="inline-wrap"><b>enqueue</b></span><span class="inline-wrap">：在队尾添加元素。</span></li><li id="iHK2SqDRAZ72raKSmk4pdm"><div class="marker"></div><span class="inline-wrap"><b>dequeue</b></span><span class="inline-wrap">：移除并返回队首元素。</span></li><li id="256k4HWbCFatx7UeToaT8e"><div class="marker"></div><span class="inline-wrap"><b>peek</b></span><span class="inline-wrap">：返回队首元素但不移除它。</span></li><li id="i7FvCMmfEMgYm3ejXsn4bN"><div class="marker"></div><span class="inline-wrap"><b>is_empty</b></span><span class="inline-wrap">：判断队列是否为空。</span></li></ol><div id="dKwe5TexqbvCNhzf8VMLNu" class="wolai-block wolai-text"><div><span class="inline-wrap">Python 的 </span><span class="inline-wrap"><code>collections.deque</code></span><span class="inline-wrap"> 可以用作队列，使用 </span><span class="inline-wrap"><code>append</code></span><span class="inline-wrap"> 方法作为 </span><span class="inline-wrap"><code>enqueue</code></span><span class="inline-wrap">，使用 </span><span class="inline-wrap"><code>popleft</code></span><span class="inline-wrap"> 方法作为 </span><span class="inline-wrap"><code>dequeue</code></span><span class="inline-wrap">。</span></div></div><h4 id="v9esToxXV4MkhgRDzT2bJD" class="wolai-block"><span class="inline-wrap">示例题目 2：最近的请求次数 (Number of Recent Calls)</span></h4><ul class="wolai-block"><li id="ab6PbtP3YFqX93JxsCexZs"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">题目： 写一个 </span><span class="inline-wrap"><code>RecentCounter</code></span><span class="inline-wrap"> 类来计算最近的请求次数。请实现 </span><span class="inline-wrap"><code>RecentCounter</code></span><span class="inline-wrap"> 类：</span><ul class="wolai-block"><li id="5bNynSSGPKAQaxR23Kpi6F"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>RecentCounter()</code></span><span class="inline-wrap"> 初始化计数器，请求数为 0。</span></li><li id="haJqCX1RNrMpszG33FevJZ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>ping(t)</code></span><span class="inline-wrap"> 在时间 </span><span class="inline-wrap"><code>t</code></span><span class="inline-wrap"> 添加一个新请求，其中 </span><span class="inline-wrap"><code>t</code></span><span class="inline-wrap"> 表示以毫秒为单位的时间。返回过去 </span><span class="inline-wrap"><code>3000</code></span><span class="inline-wrap"> 毫秒内发生的所有请求数，包含 </span><span class="inline-wrap"><code>t</code></span><span class="inline-wrap"> 。</span></li></ul><div id="jQ3uNqJMZgEY56Qf1fFRmR" class="wolai-block wolai-text"><div><span class="inline-wrap">示例：</span></div></div><code-block id="tV7k9NAiHRLDdUfBG9MJ8V" class="wolai-block"><div class="wolai-pre"><div data-lang="TypeScript" class="marker"></div><pre>输入<span class="token operator">:</span> 
<span class="token punctuation">[</span><span class="token string">"RecentCounter"</span><span class="token punctuation">,</span> <span class="token string">"ping"</span><span class="token punctuation">,</span> <span class="token string">"ping"</span><span class="token punctuation">,</span> <span class="token string">"ping"</span><span class="token punctuation">,</span> <span class="token string">"ping"</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3001</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3002</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
输出<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span></pre></div></code-block></li><li id="uQot37fP8Z3MeLqSj5WbDC"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">解答：</span><code-block id="i2FKz3TFHHnAWL1EkPDAWQ" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque

<span class="token keyword">class</span> <span class="token class-name">RecentCounter</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>queue <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">ping</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
        <span class="token keyword">while</span> self<span class="token punctuation">.</span>queue <span class="token keyword">and</span> self<span class="token punctuation">.</span>queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> t <span class="token operator">-</span> <span class="token number">3000</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>queue<span class="token punctuation">)</span>

<span class="token comment"># 测试样例</span>
recent_counter <span class="token operator">=</span> RecentCounter<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>recent_counter<span class="token punctuation">.</span>ping<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 输出: 1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>recent_counter<span class="token punctuation">.</span>ping<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: 2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>recent_counter<span class="token punctuation">.</span>ping<span class="token punctuation">(</span><span class="token number">3001</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 输出: 3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>recent_counter<span class="token punctuation">.</span>ping<span class="token punctuation">(</span><span class="token number">3002</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 输出: 3</span></pre></div></code-block></li></ul><h3 id="4WyySR6DZQkydChexoNxXV" class="wolai-block"><span class="inline-wrap">LeetCode 中的练习题目</span></h3><div id="5kJU8gVM4YUok2s2tcncGH" class="wolai-block wolai-text"><div><span class="inline-wrap">你可以先尝试一下以下 LeetCode 中的 medium 难度栈和队列题目：</span></div></div><ol class="wolai-block"><li id="62rknUUytw7vgJ9QKdFJFE"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/evaluate-reverse-polish-notation/"><span>LeetCode 150: Evaluate Reverse Polish Notation</span></a></span></li><li id="kprbVJu6c5uT7xP3wnvwxH"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/decode-string/"><span>LeetCode 394: Decode String</span></a></span></li><li id="s8JFZF7SRkC5n17Wpmwi95"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/design-circular-queue/"><span>LeetCode 622: Design Circular Queue</span></a></span></li></ol><div id="xAuQnZN4XXY83RMuJAMmWj" class="wolai-block wolai-text"><div><span class="inline-wrap">如有任何问题或需要进一步的帮助，请随时告诉我！我们可以详细讨论解题思路和代码实现。</span></div></div></article><footer></footer></body></html>