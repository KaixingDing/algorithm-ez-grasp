<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../css/wolai.css"/><title>图 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="图" class="main-title"></div></div></header><article><div id="jG1pLQM4MtH6aAeZoDUpCm" class="wolai-block wolai-text"><div><span class="inline-wrap">图（Graph）是计算机科学中一种重要的数据结构，用于表示对象及其相互关系。图由顶点（节点）和边组成，广泛应用于社交网络、地图导航、计算机网络等领域。</span></div></div><h3 id="7FRdH8ep7xrjbtRNNxw8tA" class="wolai-block"><span class="inline-wrap">图的基本概念</span></h3><ol class="wolai-block"><li id="sDDY3kiow6vGQbf6snPC52"><div class="marker"></div><span class="inline-wrap"><b>顶点（节点，Vertex）</b></span><span class="inline-wrap">：图中的基本单元。</span></li><li id="jEhk64AYuixSnaPnsN5T8P"><div class="marker"></div><span class="inline-wrap"><b>边（Edge）</b></span><span class="inline-wrap">：连接两个顶点的线段，表示顶点之间的关系。</span></li><li id="6EhqSQZLxor2dhx4mmLVfd"><div class="marker"></div><span class="inline-wrap"><b>无向图（Undirected Graph）</b></span><span class="inline-wrap">：边没有方向，即边 (u, v) 与边 (v, u) 表示相同的关系。</span></li><li id="8kVpWvJranL3LtmFB9Z2qJ"><div class="marker"></div><span class="inline-wrap"><b>有向图（Directed Graph）</b></span><span class="inline-wrap">：边有方向，即边 (u, v) 与边 (v, u) 表示不同的关系。</span></li><li id="9ZHFv6469nprzZHdMeyDvH"><div class="marker"></div><span class="inline-wrap"><b>权重（Weight）</b></span><span class="inline-wrap">：边上附加的数值，表示某种代价或距离。</span></li><li id="jBNkqzxvKo75Dc7GoLwcBv"><div class="marker"></div><span class="inline-wrap"><b>邻接表（Adjacency List）</b></span><span class="inline-wrap">：每个顶点存储一个邻接顶点列表。</span></li><li id="murVm5MDHJgcRMX8mw9tJX"><div class="marker"></div><span class="inline-wrap"><b>邻接矩阵（Adjacency Matrix）</b></span><span class="inline-wrap">：用矩阵表示顶点之间的连接关系。</span></li></ol><h3 id="8W2fBNwEYQkef4Wm14jcF5" class="wolai-block"><span class="inline-wrap">常见的图算法</span></h3><ol class="wolai-block"><li id="m9u1sU3raLEaS4o8JBS8A8"><div class="marker"></div><span class="inline-wrap"><b>深度优先搜索（DFS）</b></span><span class="inline-wrap">：从某个顶点出发，沿着边尽可能深地搜索，直到不能继续为止，然后回溯。</span></li><li id="2CiBbDTsuYfmAsNNa9x5xF"><div class="marker"></div><span class="inline-wrap"><b>广度优先搜索（BFS）</b></span><span class="inline-wrap">：从某个顶点出发，按照层次逐层搜索。</span></li><li id="9opFbtV8EV72YkSx5XFVvS"><div class="marker"></div><span class="inline-wrap"><b>最短路径算法</b></span><span class="inline-wrap">：如 Dijkstra 算法、Bellman-Ford 算法。</span></li><li id="jJWYbDakdLFF43riAZXBAD"><div class="marker"></div><span class="inline-wrap"><b>最小生成树算法</b></span><span class="inline-wrap">：如 Prim 算法、Kruskal 算法。</span></li><li id="p7v7wJh3EHtf5A7RgP76Zw"><div class="marker"></div><span class="inline-wrap"><b>拓扑排序</b></span><span class="inline-wrap">：用于有向无环图（DAG）的线性排序。</span></li></ol><h3 id="73ssZ8WAHSCiCETWaYAP21" class="wolai-block"><span class="inline-wrap">示例题目 1：课程表 (Course Schedule)</span></h3><h4 id="pkoMVULc4TQo1QpY2kysdy" class="wolai-block"><span class="inline-wrap">题目描述</span></h4><ul class="wolai-block"><li id="3Jf8hyjf8jtoHe3Z2Z2cSF"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">题目： 你这个学期必须选修 </span><span class="inline-wrap"><code>numCourses</code></span><span class="inline-wrap"> 门课程，记为 </span><span class="inline-wrap"><code>0</code></span><span class="inline-wrap"> 到 </span><span class="inline-wrap"><code>numCourses-1</code></span><span class="inline-wrap">。在选修某些课程之前需要一些先修课程。给定一个数组 </span><span class="inline-wrap"><code>prerequisites</code></span><span class="inline-wrap"> ，其中 </span><span class="inline-wrap"><code>prerequisites[i] = [ai, bi]</code></span><span class="inline-wrap"> 表示如果你想选修课程 </span><span class="inline-wrap"><code>ai</code></span><span class="inline-wrap">，你必须先选修 </span><span class="inline-wrap"><code>课程 bi</code></span><span class="inline-wrap">。请你判断是否可能完成所有课程的学习？</span><div id="28j5t3uu73HeLgNa7WHK4Y" class="wolai-block wolai-text"><div><span class="inline-wrap">示例：</span></div></div><code-block id="4i9La4CVp2MwdPuStN7fMo" class="wolai-block"><div class="wolai-pre"><div data-lang="TypeScript" class="marker"></div><pre>输入<span class="token operator">:</span> numCourses <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> prerequisites <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
输出<span class="token operator">:</span> <span class="token boolean">true</span>
解释<span class="token operator">:</span> 总共有 <span class="token number">2</span> 门课程。学习课程 <span class="token number">1</span> 之前，你需要完成课程 <span class="token number">0</span>。所以这是可能的。

输入<span class="token operator">:</span> numCourses <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> prerequisites <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
输出<span class="token operator">:</span> <span class="token boolean">false</span>
解释<span class="token operator">:</span> 总共有 <span class="token number">2</span> 门课程。学习课程 <span class="token number">1</span> 之前，你需要先完成课程 <span class="token number">0</span>；并且学习课程 <span class="token number">0</span> 之前，你还应先完成课程 <span class="token number">1</span>。这是不可能的。</pre></div></code-block></li></ul><h4 id="tct9fUDkacFDUvHx9YdwB" class="wolai-block"><span class="inline-wrap">解答</span></h4><div id="hzgdovY96fFYYWPRhuHRp4" class="wolai-block wolai-text"><div><span class="inline-wrap">这是一个典型的拓扑排序问题，可以用 DFS 或 BFS 解决。</span></div></div><h4 id="2qQBRz442jooTpF7tgSgAi" class="wolai-block"><span class="inline-wrap">使用 DFS 来检测环的存在：</span></h4><code-block id="4RFPpa6EZV6fKtAhKybPDH" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">from</span> typing <span class="token keyword">import</span> List

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">canFinish</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> numCourses<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> prerequisites<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        graph <span class="token operator">=</span> <span class="token punctuation">{</span>i<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>numCourses<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token keyword">for</span> course<span class="token punctuation">,</span> prereq <span class="token keyword">in</span> prerequisites<span class="token punctuation">:</span>
            graph<span class="token punctuation">[</span>course<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>prereq<span class="token punctuation">)</span>
        
        visited <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> numCourses  <span class="token comment"># 0 = unvisited, 1 = visiting, 2 = visited</span>
        
        <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment"># cycle detected</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
            <span class="token keyword">if</span> visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>  <span class="token comment"># already processed</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
            visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment"># mark as visiting</span>
            <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> graph<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> dfs<span class="token punctuation">(</span>neighbor<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">return</span> <span class="token boolean">False</span>
            visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment"># mark as visited</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        
        <span class="token keyword">for</span> course <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>numCourses<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> dfs<span class="token punctuation">(</span>course<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
        
        <span class="token keyword">return</span> <span class="token boolean">True</span>

<span class="token comment"># 测试样例</span>
solution <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">.</span>canFinish<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">.</span>canFinish<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: False</span></pre></div></code-block><h4 id="csgwNM5wFQx5qVFn6m9Sz8" class="wolai-block"><span class="inline-wrap">使用 BFS 来检测环的存在：</span></h4><code-block id="dkKtoBbJeRoh3F8V9w5Xfo" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">from</span> typing <span class="token keyword">import</span> List
<span class="token keyword">from</span> collections <span class="token keyword">import</span> deque<span class="token punctuation">,</span> defaultdict

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">canFinish</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> numCourses<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> prerequisites<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        graph <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
        in_degree <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> numCourses
        <span class="token keyword">for</span> course<span class="token punctuation">,</span> prereq <span class="token keyword">in</span> prerequisites<span class="token punctuation">:</span>
            graph<span class="token punctuation">[</span>prereq<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>course<span class="token punctuation">)</span>
            in_degree<span class="token punctuation">[</span>course<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
        
        queue <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>numCourses<span class="token punctuation">)</span> <span class="token keyword">if</span> in_degree<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        count <span class="token operator">=</span> <span class="token number">0</span>
        
        <span class="token keyword">while</span> queue<span class="token punctuation">:</span>
            node <span class="token operator">=</span> queue<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>
            count <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> graph<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">:</span>
                in_degree<span class="token punctuation">[</span>neighbor<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>
                <span class="token keyword">if</span> in_degree<span class="token punctuation">[</span>neighbor<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>neighbor<span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> count <span class="token operator">==</span> numCourses

<span class="token comment"># 测试样例</span>
solution <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">.</span>canFinish<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">.</span>canFinish<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: False</span></pre></div></code-block><h3 id="cCinst1i9pLcBSvZgXNmKM" class="wolai-block"><span class="inline-wrap">示例题目 2：网络延迟时间 (Network Delay Time)</span></h3><h4 id="32FCnPuXS8WDCYhHYaAFsp" class="wolai-block"><span class="inline-wrap">题目描述</span></h4><ul class="wolai-block"><li id="essm6qg3Kjk5jEKH9LJbgD"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">题目： 有 </span><span class="inline-wrap"><code>n</code></span><span class="inline-wrap"> 个网络节点，标记为 </span><span class="inline-wrap"><code>1</code></span><span class="inline-wrap"> 到 </span><span class="inline-wrap"><code>n</code></span><span class="inline-wrap">。给你一个列表 </span><span class="inline-wrap"><code>times</code></span><span class="inline-wrap">，表示信号经过有向边的传递时间 </span><span class="inline-wrap"><code>times[i] = (u, v, w)</code></span><span class="inline-wrap">，其中 </span><span class="inline-wrap"><code>u</code></span><span class="inline-wrap"> 是源节点，</span><span class="inline-wrap"><code>v</code></span><span class="inline-wrap"> 是目标节点，</span><span class="inline-wrap"><code>w</code></span><span class="inline-wrap"> 是一个信号从源节点传递到目标节点的时间。现在，从某个节点 </span><span class="inline-wrap"><code>k</code></span><span class="inline-wrap"> 发送一个信号，返回所有节点都收到信号所需的时间。如果不能使所有节点接收到信号，返回 -1。</span><div id="xtjSV8UkNmo6fUuWAYbMFw" class="wolai-block wolai-text"><div><span class="inline-wrap">示例：</span></div></div><code-block id="qzUk3fPf4KCb1RjdZgzKBx" class="wolai-block"><div class="wolai-pre"><div data-lang="TypeScript" class="marker"></div><pre>输入<span class="token operator">:</span> times <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">2</span>
输出<span class="token operator">:</span> <span class="token number">2</span></pre></div></code-block></li></ul><h4 id="fFvC5BiN3ASr52BhbE5cbb" class="wolai-block"><span class="inline-wrap">解答</span></h4><div id="jrPLAUfLNEv2JeQWYyyH2W" class="wolai-block wolai-text"><div><span class="inline-wrap">我们可以使用 Dijkstra 算法来解决这个问题，通过优先队列（最小堆）来实现。</span></div></div><code-block id="aQmT4UzuAhVuZV6sWf7W9F" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">import</span> heapq
<span class="token keyword">from</span> typing <span class="token keyword">import</span> List
<span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">networkDelayTime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> times<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        graph <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> u<span class="token punctuation">,</span> v<span class="token punctuation">,</span> w <span class="token keyword">in</span> times<span class="token punctuation">:</span>
            graph<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        min_heap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">]</span>
        dist <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
        <span class="token keyword">while</span> min_heap<span class="token punctuation">:</span>
            min_dist<span class="token punctuation">,</span> node <span class="token operator">=</span> heapq<span class="token punctuation">.</span>heappop<span class="token punctuation">(</span>min_heap<span class="token punctuation">)</span>
            <span class="token keyword">if</span> node <span class="token keyword">in</span> dist<span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
            dist<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">=</span> min_dist
            <span class="token keyword">for</span> neighbor<span class="token punctuation">,</span> time <span class="token keyword">in</span> graph<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> neighbor <span class="token keyword">not</span> <span class="token keyword">in</span> dist<span class="token punctuation">:</span>
                    heapq<span class="token punctuation">.</span>heappush<span class="token punctuation">(</span>min_heap<span class="token punctuation">,</span> <span class="token punctuation">(</span>min_dist <span class="token operator">+</span> time<span class="token punctuation">,</span> neighbor<span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dist<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>dist<span class="token punctuation">)</span> <span class="token operator">==</span> n <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>

<span class="token comment"># 测试样例</span>
solution <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>solution<span class="token punctuation">.</span>networkDelayTime<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 输出: 2</span></pre></div></code-block><h3 id="tFTVAGinctKLZrDg6u4ESk" class="wolai-block"><span class="inline-wrap">示例题目 3：克隆图 (Clone Graph)</span></h3><h4 id="oyDpozimfYYcRQmWmhbhed" class="wolai-block"><span class="inline-wrap">题目描述</span></h4><ul class="wolai-block"><li id="dt89ybmYXC2pyDvivAipaf"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">题目： 给你无向连通图中一个节点的引用，请你返回该图的深拷贝（克隆）。</span><div id="vjgZ2PVqjuTNJRbxgrjcKz" class="wolai-block wolai-text"><div><span class="inline-wrap">示例：</span></div></div><code-block id="eSEFW6oN3qSajWtvGbakSn" class="wolai-block"><div class="wolai-pre"><div data-lang="TypeScript" class="marker"></div><pre>输入<span class="token operator">:</span> adjList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
输出<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span></pre></div></code-block></li></ul><h4 id="b3inn88kXPDbXMTZs7WHis" class="wolai-block"><span class="inline-wrap">解答</span></h4><div id="3DkftD4qSnByGEqE21HUFy" class="wolai-block wolai-text"><div><span class="inline-wrap">我们可以使用 DFS 或 BFS 来解决这个问题，通过哈希表记录已经克隆过的节点。</span></div></div><h4 id="hA7jGVWz9BSjtyhuLPvHKZ" class="wolai-block"><span class="inline-wrap">使用 DFS 克隆图：</span></h4><code-block id="evpVaujckuzoCV5aT1jmBn" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">from</span> typing <span class="token keyword">import</span> List

<span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> neighbors<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token string">'Node'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>val <span class="token operator">=</span> val
        self<span class="token punctuation">.</span>neighbors <span class="token operator">=</span> neighbors <span class="token keyword">if</span> neighbors <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span> <span class="token keyword">else</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">cloneGraph</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">:</span> <span class="token string">'Node'</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Node'</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> node<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>
        
        visited <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
        <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> node <span class="token keyword">in</span> visited<span class="token punctuation">:</span>
                <span class="token keyword">return</span> visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span>
            
            clone <span class="token operator">=</span> Node<span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
            visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">=</span> clone
            <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> node<span class="token punctuation">.</span>neighbors<span class="token punctuation">:</span>
                clone<span class="token punctuation">.</span>neighbors<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dfs<span class="token punctuation">(</span>neighbor<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> clone
        
        <span class="token keyword">return</span> dfs<span class="token punctuation">(</span>node<span class="token punctuation">)</span>

<span class="token comment"># 测试样例</span>
<span class="token comment"># 此题需要构建图结构来测试，略</span></pre></div></code-block><h4 id="ctKuEcEkXJwHvB6fxpWtgc" class="wolai-block"><span class="inline-wrap">使用 BFS 克隆图：</span></h4><code-block id="m6BKL4eXmCTgW35oBfoWm6" class="wolai-block"><div class="wolai-pre"><div data-lang="Python" class="marker"></div><pre><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque

<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">cloneGraph</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> node<span class="token punctuation">:</span> <span class="token string">'Node'</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'Node'</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> node<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>
        
        visited <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        queue <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">)</span>
        visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token operator">=</span> Node<span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
        
        <span class="token keyword">while</span> queue<span class="token punctuation">:</span>
            n <span class="token operator">=</span> queue<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> n<span class="token punctuation">.</span>neighbors<span class="token punctuation">:</span>
                <span class="token keyword">if</span> neighbor <span class="token keyword">not</span> <span class="token keyword">in</span> visited<span class="token punctuation">:</span>
                    visited<span class="token punctuation">[</span>neighbor<span class="token punctuation">]</span> <span class="token operator">=</span> Node<span class="token punctuation">(</span>neighbor<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
                    queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span>neighbor<span class="token punctuation">)</span>
                visited<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span>neighbors<span class="token punctuation">.</span>append<span class="token punctuation">(</span>visited<span class="token punctuation">[</span>neighbor<span class="token punctuation">]</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> visited<span class="token punctuation">[</span>node<span class="token punctuation">]</span>

<span class="token comment"># 测试样例</span>
<span class="token comment"># 此题需要构建图结构来测试，略</span></pre></div></code-block><h4 id="prufLaGqSQJUrHjnD5YXxu" class="wolai-block"><span class="inline-wrap">详细解释</span></h4><ol class="wolai-block"><li id="fwiG3JdFFnkyxY9D1PJ158"><div class="marker"></div><span class="inline-wrap"><b>初始化</b></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="ez7aNDncnEmwPAjKziYBzd"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果输入节点 </span><span class="inline-wrap"><code>node</code></span><span class="inline-wrap"> 为 </span><span class="inline-wrap"><code>None</code></span><span class="inline-wrap">，直接返回 </span><span class="inline-wrap"><code>None</code></span><span class="inline-wrap">。</span></li><li id="brLy1fVfZYwUUABdzkmibX"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 </span><span class="inline-wrap"><code>visited</code></span><span class="inline-wrap"> 哈希表存储已克隆的节点，键为原节点，值为克隆节点。</span></li><li id="quj7YUL9MghwKDo4uNhHzn"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">初始化队列 </span><span class="inline-wrap"><code>queue</code></span><span class="inline-wrap"> 并将输入节点 </span><span class="inline-wrap"><code>node</code></span><span class="inline-wrap"> 放入队列中。</span></li><li id="sh6ocncnLGzMSPzewezUaX"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">将输入节点 </span><span class="inline-wrap"><code>node</code></span><span class="inline-wrap"> 对应的克隆节点添加到 </span><span class="inline-wrap"><code>visited</code></span><span class="inline-wrap"> 中。</span></li></ul></li><li id="bBLXfdq67gBEaqDm8e9jUW"><div class="marker"></div><span class="inline-wrap"><b>BFS 遍历</b></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="tyuEyscHigPrH3FBSBet2D"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 </span><span class="inline-wrap"><code>while</code></span><span class="inline-wrap"> 循环遍历队列，直到队列为空。</span></li><li id="s1i66upD5SvbUodt2zf5MY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">从队列中弹出节点 </span><span class="inline-wrap"><code>n</code></span><span class="inline-wrap">，遍历其所有邻居节点 </span><span class="inline-wrap"><code>neighbor</code></span><span class="inline-wrap">。</span></li><li id="qzhuTAg4cnHBG1gEgV7Pdc"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果邻居节点 </span><span class="inline-wrap"><code>neighbor</code></span><span class="inline-wrap"> 未被克隆（不在 </span><span class="inline-wrap"><code>visited</code></span><span class="inline-wrap"> 中），则创建其克隆节点并添加到 </span><span class="inline-wrap"><code>visited</code></span><span class="inline-wrap"> 中，同时将其放入队列中。</span></li><li id="cTXmGz9UaGS144gqBJDr4J"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">将克隆的邻居节点添加到克隆节点 </span><span class="inline-wrap"><code>visited[n]</code></span><span class="inline-wrap"> 的邻居列表中。</span></li></ul></li><li id="bK2atypuEQfpGaStkBt49z"><div class="marker"></div><span class="inline-wrap"><b>返回克隆图的起始节点</b></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="aquxM1UocD8PCciBXfXBhW"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">最后返回起始节点 </span><span class="inline-wrap"><code>node</code></span><span class="inline-wrap"> 对应的克隆节点 </span><span class="inline-wrap"><code>visited[node]</code></span><span class="inline-wrap">。</span></li></ul></li></ol><div id="hqjaXFdqG5A8twnqRwjnoX" class="wolai-block wolai-text"><div><span class="inline-wrap">通过 DFS 或 BFS 两种方法，都能够正确地克隆图。使用 DFS 通过递归实现，使用 BFS 通过队列实现。</span></div></div><h3 id="r2MoWL5UjKB3Rwa6HsQM7f" class="wolai-block"><span class="inline-wrap">LeetCode 中的练习题目</span></h3><ol class="wolai-block"><li id="sCiU5YQFLQKnddoGS3VZN9"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/course-schedule/"><span>LeetCode 207: Course Schedule</span></a></span></li><li id="rhdGHNFVMbaa8g942SiJMZ"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/course-schedule-ii/"><span>LeetCode 210: Course Schedule II</span></a></span></li><li id="gXg1ZZi1s8xL7Yx2UGGGFr"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/clone-graph/"><span>LeetCode 133: Clone Graph</span></a></span></li><li id="kCvhwPogeW2gg587aMFmSa"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph/"><span>LeetCode 323: Number of Connected Components in an Undirected Graph</span></a></span></li><li id="jsaVtv493wzNUuoVp4Li6J"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/network-delay-time/"><span>LeetCode 743: Network Delay Time</span></a></span></li><li id="e8fiYoxihriRS7dUYPiFQQ"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/is-graph-bipartite/"><span>LeetCode 785: Is Graph Bipartite?</span></a></span></li><li id="tLyVut9ThNmvAR2FErhicP"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/possible-bipartition/"><span>LeetCode 886: Possible Bipartition</span></a></span></li><li id="4CAexB4tiMGVBPz8DoNFoJ"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/minimum-height-trees/"><span>LeetCode 310: Minimum Height Trees</span></a></span></li><li id="sg7LtZEnDgEid2XiGYe3v2"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/evaluate-division/"><span>LeetCode 399: Evaluate Division</span></a></span></li><li id="dn5iJcNqQMQt7hjk7cXxt"><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode.com/problems/unique-paths-iii/"><span>LeetCode 980: Unique Paths III</span></a></span></li></ol><div id="dy5WZakdvszd2GNYTAmFoK" class="wolai-block wolai-text"><div><span class="inline-wrap">这些题目涵盖了不同类型的图算法问题，通过练习这些题目，你能够更好地理解和掌握图的基本概念和算法，如 DFS、BFS、Dijkstra 算法、拓扑排序等。</span></div></div></article><footer></footer></body></html>